#!/bin/bash

# highkey just copied: https://github.com/Vaeralie/ArchLinux-Maintenance-Script

echo "ArchLinux-Maintenance Script"

systemctl --failed
journalctl -p 3 -b
sudo pacman -Syyu
update_mirrorlist # is aliased to reflector

echo -e "\n"
echo "Orphaned packages :"
pacman -Qtd
if [[ -n $(pacman -Qtd) ]]; then
    echo -e "\n"
    echo "Remove orphaned packages ?"
    select yn in "Yes" "No"; do
        case $yn in
            Yes )
                echo "Removing orphaned packages..."
                pacman -Qtdq | sudo pacman -Rns -
                break;;

            No ) break;;
        esac
    done
else
    echo "No orphaned packages found."
fi

echo "Short reminder that it would be a good idea to run the backup script"
